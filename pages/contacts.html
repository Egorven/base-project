<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Контакты — Егор</title>
  <link rel="stylesheet" href="../styles/styles.css" />
</head>

<body>

  <a href="#main" class="skip-link">Перейти к содержанию</a>

  <div class="page">
    <!-- Шапка -->
    <header class="header">
      <img src="../images/icons/logo.png" alt="Логотип" class="logo" width="32" height="32" />
      <h1 class="header__title">Егор</h1>
    </header>

    <!-- Навигация -->
    <nav class="nav" role="navigation">
      <ul class="nav__list">
        <li class="nav__item">
          <a class="nav__link" href="../">Главная</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="../pages/projects.html">Проекты</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="../pages/diary.html">Дневник</a>
        </li>
        <li class="nav__item nav__item--active">
          <a class="nav__link" href="../pages/contacts.html" aria-current="page">Контакты</a>
        </li>
      </ul>
    </nav>

    <!-- Основной контент -->
    <main class="main" id="main">
      <h2>Свяжитесь со мной</h2>

      <form id="myForm" novalidate>
        <fieldset>
          <legend>Контактная форма</legend>

          <div class="form-group">
            <label for="name">
              Имя <span class="required-indicator" aria-hidden="true">*</span>
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              aria-required="true"
            />
            <span class="error-message" id="name-error" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="email">
              Email <span class="required-indicator" aria-hidden="true">*</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              aria-required="true"
            />
            <span class="error-message" id="email-error" role="alert"></span>
          </div>

          <div class="form-group">
            <label for="message">
              Сообщение <span class="required-indicator" aria-hidden="true">*</span>
            </label>
            <textarea
              id="message"
              name="message"
              required
              aria-required="true"
              rows="5"
            ></textarea>
            <span class="error-message" id="message-error" role="alert"></span>
          </div>

          <button type="submit">Отправить сообщение</button>
        </fieldset>
      </form>

      <section aria-labelledby="contact-info-heading">
        <h2 id="contact-info-heading">Контакты:</h2>
        <p>Почта: <a href="mailto:student@edu.ru">student@edu.ru</a></p>
        <p>
          GitHub: <a href="https://github.com/Egorven" target="_blank" rel="noopener">Egorven</a>
        </p>
        <p>Адрес: Москва, Россия</p>
      </section>
    </main>

    <footer class="footer">
      <p class="footer__text">&copy; 2025 Егор</p>
    </footer>
  </div>

  <script>
    document.getElementById('myForm').addEventListener('submit', function (e) {
      e.preventDefault();
      let isValid = true;

      document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
      document.querySelectorAll('[aria-invalid]').forEach(el => el.removeAttribute('aria-invalid'));
      document.querySelectorAll('[aria-describedby]').forEach(el => el.removeAttribute('aria-describedby'));

      const fields = ['name', 'email', 'message'];
      fields.forEach(name => {
        const field = document.getElementById(name);
        const errorEl = document.getElementById(`${name}-error`);
        const value = field.value.trim();

        if (!value) {
          field.setAttribute('aria-invalid', 'true');
          field.setAttribute('aria-describedby', `${name}-error`);
          errorEl.textContent = 'Это поле обязательно для заполнения';
          isValid = false;
        } else if (name === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
          field.setAttribute('aria-invalid', 'true');
          field.setAttribute('aria-describedby', `${name}-error`);
          errorEl.textContent = 'Введите корректный адрес электронной почты';
          isValid = false;
        }
      });

      if (isValid) {
        const alert = document.createElement('div');
        alert.setAttribute('role', 'alert');
        alert.setAttribute('aria-live', 'polite');
        alert.className = 'alert-message';
        alert.textContent = 'Сообщение успешно отправлено!';
        document.body.appendChild(alert);
        setTimeout(() => {
          if (alert.parentNode) alert.parentNode.removeChild(alert);
        }, 3000);

        this.reset();
      }
    });
  </script>
</body>

</html>